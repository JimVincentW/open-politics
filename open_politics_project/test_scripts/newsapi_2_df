import pandas as pd
from newsapi import NewsApiClient
from chain_1 import extract_news_content


client = NewsApiClient(api_key='47d333159d8745c1b51cacd5440d65c1')

top_headlines = client.get_top_headlines(q='Ukraine',
                                            # country='de',
                                            # language='de',
                                            )

print(top_headlines)

if top_headlines['totalResults'] >= 1:
    for article in top_headlines['articles']:
        print('------------------')
        print('Title', article['title'])
        print('Content:', article['content'])
        print('Url:', article['url'])
        print('------------------')

df = pd.DataFrame(top_headlines['articles'])
df.to_csv('news.csv')


for url in df['url']:
    print(extract_news_content(url))
    print('------------------')