{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <title>My Website</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Styleshee-->
    <link rel="stylesheet" href="{% static 'styles_process.css' %}">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,900|Ubuntu&display=swap" rel="stylesheet">
    <!-- installing htmx via staticfiles-->
    <script src="{% static 'htmx/htmx.min.js' %}"></script>
    

  </head>
  <body>
<!--   extending blocks -->
    {% block hi %}
    {% endblock %}
    
    {% block news_button %}
    {% endblock %}

    {% block content %}
    {% endblock %}

    {% block articles %}
    {% endblock %}

  </body>
  <script>
    document.body.addEventListener('htmx:afterOnLoad', function(event){
        var response = event.detail.xhr.response;
        var jsonResponse = JSON.parse(response);
        var articles = jsonResponse.articles;
        var statusDiv = document.getElementById('status');
        var articlesList = document.getElementById('articles-list');
        
        // Clear previous articles
        articlesList.innerHTML = '';
    
        if(articles.length === 0) {
            statusDiv.innerText = 'No articles found';
            return;
        }
        
        statusDiv.innerText = 'Fetched articles:';
        articles.forEach(function(article){
            var listItem = document.createElement('li');
            var link = document.createElement('a');
            link.href = article.url;
            link.innerText = article.title;
            listItem.appendChild(link);
            articlesList.appendChild(listItem);
        });
    });
  </script> 
</html>